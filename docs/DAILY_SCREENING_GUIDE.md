# æ—¥å†é€‰å¸Dashboardä½¿ç”¨æŒ‡å—

## ğŸ“– åŠŸèƒ½æ¦‚è¿°

æ—¥å†é€‰å¸Dashboardæ˜¯ä¸€ä¸ªæŒ‰äº¤æ˜“æ—¥ä¸ºå•ä½è¿›è¡Œåˆçº¦æ ‡çš„ç­›é€‰çš„å·¥å…·ï¼Œç”¨äºå›ç­”"æŸæ—¥10ç‚¹å‰ï¼Œç³»ç»Ÿæ¨èäº†å“ªäº›æ ‡çš„"è¿™ç±»é—®é¢˜ã€‚

### æ ¸å¿ƒç‰¹æ€§

1. **æ—¶é—´ç»´åº¦ç®¡ç†**ï¼šä»¥"äº¤æ˜“æ—¥"ä¸ºå•ä½ç»„ç»‡ç­›é€‰ç»“æœ
2. **å›ºå®šæ—¶é—´ç‚¹å¿«ç…§**ï¼šåŸºäºæ¯æ—¥10ç‚¹å‰æ•°æ®åˆ†æ
3. **å†å²å›æº¯èƒ½åŠ›**ï¼šå¯æŸ¥è¯¢ä»»æ„å†å²æ—¥æœŸçš„ç­›é€‰ç»“æœ
4. **å¯è§†åŒ–Dashboard**ï¼šç›´è§‚å±•ç¤ºæŒ‰å¤©åˆ†ç»„çš„é€‰å¸ç»“æœ

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. æ‰§è¡Œå½“å¤©ç­›é€‰

```bash
# ä½¿ç”¨é»˜è®¤é…ç½®æ‰§è¡Œå½“å¤©ç­›é€‰
python manage.py screen_by_date

# è¾“å‡ºç¤ºä¾‹:
# ğŸ“… é»˜è®¤å½“å¤©æ¨¡å¼: 2024-12-08
# ğŸ¯ ç­›é€‰æ—¥æœŸ: 2024-12-08
# âœ“ å·²ä¿å­˜ç­›é€‰è®°å½• ID=123
# æ ‡çš„æ•°: 15
```

### 2. è®¿é—®Dashboard

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š
```
http://127.0.0.1:8000/screening/daily/
```

**DashboardåŠŸèƒ½**ï¼š
- ğŸ“… **æ—¥æœŸé€‰æ‹©å™¨**ï¼šæ˜¾ç¤ºæ‰€æœ‰å·²åˆ†æçš„æ—¥æœŸï¼ˆæŒ‰æœ€æ–°æ’åºï¼‰
- ğŸ” **åŠ¨æ€ç­›é€‰**ï¼šå‰ç«¯æä¾›5ä¸ªç­›é€‰æ¡ä»¶è¾“å…¥æ¡†ï¼Œè‡ªåŠ¨å¡«å……é»˜è®¤å€¼
  - VDR â‰¥ 6
  - 15mæŒ¯å¹… â‰¥ 50%
  - EMA99æ–œç‡ â‰¤ -10
  - å¹´åŒ–èµ„è´¹ â‰¥ -10%
  - 24häº¤æ˜“é‡ â‰¥ 5M USDT
- ğŸ“Š **æ ‡çš„åˆ—è¡¨**ï¼šå®æ—¶å±•ç¤ºç¬¦åˆç­›é€‰æ¡ä»¶çš„åˆçº¦ï¼ˆæ˜¾ç¤º X / 531 ä¸ªæ ‡çš„ï¼‰
- ğŸ”„ **å®æ—¶æ’åº**ï¼šç‚¹å‡»è¡¨å¤´å¯æŒ‰ä¸åŒæŒ‡æ ‡æ’åº
- ğŸ”„ **æ¢å¤é»˜è®¤**ï¼šä¸€é”®è¿˜åŸåˆ°é»˜è®¤ç­›é€‰æ¡ä»¶

---

## ğŸ“‹ å‘½ä»¤è¯¦è§£

### åŸºç¡€ç”¨æ³•

#### 1. æŒ‡å®šæ—¥æœŸæ‰§è¡Œ

```bash
python manage.py screen_by_date --date 2024-12-05
```

#### 2. æ‰¹é‡æ‰§è¡Œæ—¥æœŸèŒƒå›´

```bash
# æ‰¹é‡æ‰§è¡Œ12æœˆ1æ—¥è‡³12æœˆ5æ—¥
python manage.py screen_by_date --from-date 2024-12-01 --to-date 2024-12-05

# è¾“å‡ºç¤ºä¾‹:
# ğŸ“… æ‰¹é‡æ‰§è¡Œæ¨¡å¼: 2024-12-01 è‡³ 2024-12-05 (å…±5å¤©)
# âœ… æ‰¹é‡æ‰§è¡Œå®Œæˆ
#   æˆåŠŸ: 5 å¤©
#   è·³è¿‡: 0 å¤©
```

#### 3. å¼ºåˆ¶è¦†ç›–å·²æœ‰è®°å½•

```bash
# å¦‚æœæŸæ—¥æœŸå·²å­˜åœ¨è®°å½•ï¼Œå¼ºåˆ¶é‡æ–°æ‰§è¡Œ
python manage.py screen_by_date --date 2024-12-05 --force
```

---

### è‡ªå®šä¹‰ç­›é€‰æ¡ä»¶

#### é»˜è®¤ç­›é€‰æ ‡å‡†

```bash
# é»˜è®¤é…ç½®ï¼ˆä¸ä½ çš„éœ€æ±‚ä¸€è‡´ï¼‰
python manage.py screen_by_date
```

**é»˜è®¤å€¼**ï¼š
- VDR >= 6
- 15mæŒ¯å¹… >= 50%
- å¹´åŒ–èµ„è´¹ >= -10%
- EMA99æ–œç‡ <= -10ï¼ˆè´Ÿå€¼è¡¨ç¤ºä¸‹é™è¶‹åŠ¿ï¼‰
- 24hæˆäº¤é‡ >= 500ä¸‡USDT

> **æ³¨æ„**ï¼šè¿™äº›æ˜¯å‘½ä»¤è¡Œå‚æ•°çš„é»˜è®¤å€¼ã€‚Dashboardå‰ç«¯é¡µé¢ä¼šè‡ªåŠ¨åº”ç”¨è¿™äº›ç­›é€‰æ¡ä»¶ã€‚

#### è‡ªå®šä¹‰å‚æ•°

```bash
# æ›´ä¸¥æ ¼çš„ç­›é€‰æ¡ä»¶
python manage.py screen_by_date \
  --min-vdr 8 \
  --min-amplitude 60 \
  --min-funding-rate -5 \
  --min-volume 10000000

# è‡ªå®šä¹‰æƒé‡
python manage.py screen_by_date \
  --vdr-weight 0.5 \
  --ker-weight 0.3 \
  --ovr-weight 0.15 \
  --cvd-weight 0.05
```

---

### å‚æ•°è¯´æ˜

| å‚æ•° | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| `--date` | æŒ‡å®šç­›é€‰æ—¥æœŸ (YYYY-MM-DD) | å½“å¤© |
| `--from-date` | æ‰¹é‡æ‰§è¡Œèµ·å§‹æ—¥æœŸ | - |
| `--to-date` | æ‰¹é‡æ‰§è¡Œç»“æŸæ—¥æœŸ | - |
| `--min-vdr` | VDRæœ€å°å€¼ | 6 |
| `--min-amplitude` | 15åˆ†é’ŸæŒ¯å¹…æœ€å°å€¼(%) | 50 |
| `--min-funding-rate` | å¹´åŒ–èµ„é‡‘è´¹ç‡æœ€å°å€¼(%) | -10 |
| `--max-ma99-slope` | EMA99æ–œç‡æœ€å¤§å€¼ | -10 |
| `--min-volume` | 24häº¤æ˜“é‡æœ€å°å€¼(USDT) | 5000000 |
| `--vdr-weight` | VDRæƒé‡ | 0.40 |
| `--ker-weight` | KERæƒé‡ | 0.30 |
| `--ovr-weight` | OVRæƒé‡ | 0.20 |
| `--cvd-weight` | CVDæƒé‡ | 0.10 |
| `--force` | å¼ºåˆ¶è¦†ç›–å·²æœ‰è®°å½• | False |
| `--no-html` | ä¸ç”ŸæˆHTMLæŠ¥å‘Š | False |
| `--no-cache` | ç¦ç”¨Kçº¿æ•°æ®ç¼“å­˜ | False |

---

## ğŸ—‚ï¸ æ•°æ®åº“ç»“æ„

### ScreeningRecordï¼ˆç­›é€‰è®°å½•è¡¨ï¼‰

æ–°å¢å­—æ®µï¼š
```python
screening_date = models.DateField(
    'ç­›é€‰æ—¥æœŸ',
    null=True,
    blank=True,
    help_text='æ ‡è¯†è¯¥ç­›é€‰å¯¹åº”çš„äº¤æ˜“æ—¥æœŸ(å¦‚2024-12-05)'
)
```

**è¯­ä¹‰è¯´æ˜**ï¼š
- `screening_date = null`ï¼šè¡¨ç¤ºå®æ—¶ç­›é€‰ï¼ˆæ—§çš„ `screen_simple` å‘½ä»¤ï¼‰
- `screening_date = 2024-12-05`ï¼šè¡¨ç¤ºæ—¥å†ç­›é€‰ï¼ˆæ–°çš„ `screen_by_date` å‘½ä»¤ï¼‰

---

## ğŸŒ APIæ¥å£

### 1. è·å–æ—¥æœŸåˆ—è¡¨

```
GET /screening/daily/api/dates/
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "dates": [
    {
      "date": "2024-12-05",
      "record_id": 100,
      "total_candidates": 12,
      "execution_time": 45.2,
      "notes": "æ—¥å†ç­›é€‰ 2024-12-05 - VDR:40% KER:30%",
      "filters": {
        "min_vdr": 6.0,
        "min_amplitude": 50.0,
        "min_funding_rate": -10.0
      }
    }
  ]
}
```

### 2. è·å–æŒ‡å®šæ—¥æœŸçš„ç­›é€‰ç»“æœ

```
GET /screening/daily/api/<date>/
```

**ç¤ºä¾‹**ï¼š
```bash
curl http://127.0.0.1:8000/screening/daily/api/2024-12-05/
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "record": {
    "screening_date": "2024-12-05",
    "total_candidates": 12,
    "weights": {...},
    "filters": {...}
  },
  "results": [
    {
      "rank": 1,
      "symbol": "ZENUSDT",
      "current_price": 23.45,
      "vdr": 12.5,
      "ker": 0.45,
      "amplitude_sum_15m": 65.3,
      "annual_funding_rate": -15.2
    }
  ],
  "date": "2024-12-05"
}
```

---

## ğŸ”„ ä¸ç°æœ‰ç³»ç»Ÿçš„å…³ç³»

### ä¸¤ç§ç­›é€‰æ¨¡å¼å¯¹æ¯”

| ç»´åº¦ | å®æ—¶ç­›é€‰ (`screen_simple`) | æ—¥å†ç­›é€‰ (`screen_by_date`) |
|------|---------------------------|----------------------------|
| **æ•°æ®æ—¶æ•ˆ** | å½“å‰æœ€æ–°å¸‚åœºæ•°æ® | æŒ‡å®šæ—¥æœŸ10ç‚¹å‰æ•°æ® |
| **æ—¶é—´ç»´åº¦** | æ— ï¼ˆæ‰§è¡Œæ—¶é—´ï¼‰ | æœ‰ï¼ˆäº¤æ˜“æ—¥æœŸï¼‰ |
| **ç”¨é€”** | å½“ä¸‹å†³ç­– | å†å²å›æº¯ã€ç­–ç•¥éªŒè¯ |
| **é¡µé¢** | `/screening/` | `/screening/daily/` |
| **æ•°æ®åº“æ ‡è¯†** | `screening_date = null` | `screening_date = 2024-12-05` |

### é¡µé¢å¯¼èˆª

```
/screening/         â† å®æ—¶ç­›é€‰é¡µé¢ï¼ˆç°æœ‰ï¼‰
/screening/daily/   â† æ—¥å†ç­›é€‰é¡µé¢ï¼ˆæ–°å¢ï¼‰
/grids/             â† ç½‘æ ¼ç®¡ç†é¡µé¢
```

---

## ğŸ“Š å…¸å‹ä½¿ç”¨åœºæ™¯

### åœºæ™¯1ï¼šæ¯æ—¥ä¾‹è¡Œåˆ†æ

```bash
# æ¯å¤©æ—©ä¸Š10:30æ‰§è¡Œ
python manage.py screen_by_date

# æŸ¥çœ‹ç»“æœ
# æµè§ˆå™¨è®¿é—®: http://127.0.0.1:8000/screening/daily/
```

### åœºæ™¯2ï¼šå†å²æ•°æ®è¡¥å½•

```bash
# è¡¥å½•è¿‡å»7å¤©çš„æ•°æ®
python manage.py screen_by_date \
  --from-date 2024-12-01 \
  --to-date 2024-12-07
```

### åœºæ™¯3ï¼šç­–ç•¥å‚æ•°å›æµ‹

```bash
# 2024å¹´12æœˆç¬¬ä¸€å‘¨ï¼Œä½¿ç”¨æ›´ä¸¥æ ¼çš„æ¡ä»¶
python manage.py screen_by_date \
  --from-date 2024-12-01 \
  --to-date 2024-12-07 \
  --min-vdr 8 \
  --min-amplitude 60 \
  --force  # è¦†ç›–å·²æœ‰è®°å½•
```

### åœºæ™¯4ï¼šå¯¼å‡ºæŸæ—¥ç»“æœ

```bash
# APIæ–¹å¼è·å–
curl http://127.0.0.1:8000/screening/daily/api/2024-12-05/ > daily_2024-12-05.json

# HTMLæŠ¥å‘Šï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
# ä½ç½®: screening_reports/daily_2024-12-05.html
```

---

## ğŸ› ï¸ æ•…éšœæ’æŸ¥

### é—®é¢˜1ï¼šæ²¡æœ‰æ•°æ®æ˜¾ç¤º

**åŸå› **ï¼šå°šæœªæ‰§è¡Œä»»ä½•æ—¥å†ç­›é€‰

**è§£å†³**ï¼š
```bash
python manage.py screen_by_date
```

### é—®é¢˜2ï¼šæŸæ—¥æœŸè¢«è·³è¿‡

**è¾“å‡º**ï¼š
```
âš ï¸ æ—¥æœŸ 2024-12-05 å·²å­˜åœ¨ç­›é€‰è®°å½•(ID=100)ï¼Œè·³è¿‡
```

**è§£å†³**ï¼šä½¿ç”¨ `--force` å‚æ•°å¼ºåˆ¶è¦†ç›–
```bash
python manage.py screen_by_date --date 2024-12-05 --force
```

### é—®é¢˜3ï¼šæ— ç¬¦åˆæ¡ä»¶çš„æ ‡çš„

**è¾“å‡º**ï¼š
```
âš ï¸ æ— åˆæ ¼æ ‡çš„ï¼Œè·³è¿‡ä¿å­˜
```

**åŸå› **ï¼šç­›é€‰æ¡ä»¶è¿‡äºä¸¥æ ¼

**è§£å†³**ï¼šè°ƒæ•´å‚æ•°
```bash
python manage.py screen_by_date --min-vdr 4 --min-amplitude 30
```

---

## ğŸ“ˆ æœªæ¥æ‰©å±•

### è®¡åˆ’åŠŸèƒ½

1. **å®šæ—¶ä»»åŠ¡**
   ```bash
   # ä½¿ç”¨cronæˆ–Celeryæ¯æ—¥è‡ªåŠ¨æ‰§è¡Œ
   0 10 * * * cd /path/to/project && python manage.py screen_by_date
   ```

2. **æ¨é€é€šçŸ¥**
   - ç­›é€‰å®Œæˆåï¼Œæ¨é€å€™é€‰æ ‡çš„åˆ°Telegram
   - é‚®ä»¶æŠ¥å‘Š

3. **ç­–ç•¥å›æµ‹**
   - åŸºäºå†å²æ—¥å†ç­›é€‰ç»“æœï¼Œå›æµ‹ç½‘æ ¼ç­–ç•¥æ”¶ç›Š
   - ç”Ÿæˆæ”¶ç›Šæ›²çº¿

4. **å¤šæ—¶é—´ç‚¹å¿«ç…§**
   - ä¸ä»…10ç‚¹ï¼Œå¢åŠ 14ç‚¹ã€18ç‚¹çš„å¿«ç…§
   - å¯¹æ¯”ä¸åŒæ—¶é—´ç‚¹çš„é€‰å¸å·®å¼‚

---

## ğŸ“ æ€»ç»“

**æ ¸å¿ƒä»·å€¼**ï¼š
- âœ… å°†ç­›é€‰ç»“æœä»"æ—¶é—´ç‚¹"å‡çº§ä¸º"äº¤æ˜“æ—¥"ç»´åº¦
- âœ… æ”¯æŒå†å²å›æº¯å’Œæ‰¹é‡åˆ†æ
- âœ… ä¸ºç­–ç•¥å›æµ‹å’Œæ•ˆæœè¯„ä¼°æä¾›æ•°æ®åŸºç¡€
- âœ… æœ€å°åŒ–æ”¹åŠ¨ï¼Œå®Œå…¨å‘åå…¼å®¹

**ä¸‹ä¸€æ­¥**ï¼š
1. è¿è¡Œ `python manage.py screen_by_date` æ‰§è¡Œå½“å¤©ç­›é€‰
2. è®¿é—® `http://127.0.0.1:8000/screening/daily/` æŸ¥çœ‹Dashboard
3. æ ¹æ®éœ€è¦è°ƒæ•´ç­›é€‰å‚æ•°
