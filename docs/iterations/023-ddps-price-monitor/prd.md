# PRD: DDPSä»·æ ¼ç›‘æ§æœåŠ¡

## æ–‡æ¡£ä¿¡æ¯

| å±æ€§ | å€¼ |
|------|-----|
| è¿­ä»£ç¼–å· | 023 |
| ç‰ˆæœ¬ | 1.0 |
| çŠ¶æ€ | éœ€æ±‚å®šä¹‰ä¸­ |
| åˆ›å»ºæ—¥æœŸ | 2026-01-08 |
| å…³è”è¿­ä»£ | 009(DDPS-Z), 010(æƒ¯æ€§æ‰‡é¢), 017(å¤šç­–ç•¥å›æµ‹), 018(Î²å‘¨æœŸ), 021(ç­–ç•¥7) |

## 1. èƒŒæ™¯ä¸ç›®æ ‡

### 1.1 èƒŒæ™¯

å½“å‰DDPS-Zç³»ç»Ÿä¸»è¦æä¾›å›æµ‹åŠŸèƒ½å’ŒWebç«¯å¯è§†åŒ–ï¼Œç¼ºä¹**å®æ—¶ç›‘æ§å’Œä¸»åŠ¨æ¨é€**èƒ½åŠ›ã€‚ç”¨æˆ·éœ€è¦ï¼š
- å®šæ—¶è·å–å¤šä¸ªäº¤æ˜“å¯¹çš„ä»·æ ¼çŠ¶æ€
- è‡ªåŠ¨æ£€æµ‹æ˜¯å¦æ»¡è¶³ç­–ç•¥ä¹°å…¥/å–å‡ºæ¡ä»¶
- è¢«åŠ¨æ¥æ”¶å¸‚åœºå‘¨æœŸé¢„è­¦ä¿¡æ¯

### 1.2 æ ¸å¿ƒä»·å€¼

**ä¸€å¥è¯æè¿°**ï¼šæ„å»ºDDPSä»·æ ¼ç›‘æ§æœåŠ¡ï¼Œå®šæ—¶æ¨é€äº¤æ˜“ä¿¡å·å’Œå¸‚åœºçŠ¶æ€ï¼Œæ”¯æŒç­–ç•¥è®¢å•è¿½è¸ªã€‚

### 1.3 ç›®æ ‡ç”¨æˆ·

- é‡åŒ–äº¤æ˜“è€…ï¼šéœ€è¦å®šæ—¶æ¥æ”¶ä¹°å–ä¿¡å·
- æŠ€æœ¯åˆ†æå¸ˆï¼šéœ€è¦å‘¨æœŸé¢„è­¦å’Œä»·æ ¼åˆ†å¸ƒ

## 2. éœ€æ±‚èŒƒå›´

### 2.1 æ ¸å¿ƒéœ€æ±‚ï¼ˆP0 - MVPï¼‰

| ID | åŠŸèƒ½ | æè¿° | ä¼˜å…ˆçº§ |
|----|------|------|--------|
| REQ-001 | æ•°æ®æ›´æ–°æœåŠ¡ | å®šæ—¶æ›´æ–°æŒ‡å®šäº¤æ˜“å¯¹Kçº¿æ•°æ®ï¼ˆç‹¬ç«‹å¯å¤ç”¨ï¼‰ | P0 |
| REQ-002 | DDPSç›‘æ§æœåŠ¡ | è®¡ç®—äº¤æ˜“å¯¹çš„DDPSæŒ‡æ ‡å’Œç­–ç•¥ä¿¡å·ï¼ˆæ ¸å¿ƒæœåŠ¡å±‚ï¼‰ | P0 |
| REQ-003 | ç­–ç•¥ä¿¡å·æ£€æµ‹ | æ£€æµ‹ä¹°å…¥/å–å‡ºæ¡ä»¶ï¼Œç®¡ç†è™šæ‹Ÿè®¢å• | P0 |
| REQ-004 | å‘¨æœŸé¢„è­¦ | åˆ—å‡ºä¸Šæ¶¨/ä¸‹è·Œé¢„è­¦å‘¨æœŸçš„äº¤æ˜“å¯¹ | P0 |
| REQ-005 | ä»·æ ¼çŠ¶æ€ | åˆ—å‡ºæ¯ä¸ªäº¤æ˜“å¯¹çš„ç°ä»·ã€å‘¨æœŸã€P5/P95ã€æ¦‚ç‡èŒƒå›´ | P0 |
| REQ-006 | æ¨é€æ•´åˆ | æ•´åˆæ‰€æœ‰æ•°æ®å¹¶æ¨é€åˆ°æŒ‡å®šchannel | P0 |
| REQ-007 | ä¸»è°ƒåº¦è„šæœ¬ | ç»Ÿä¸€è°ƒç”¨æ‰€æœ‰å­è„šæœ¬å®Œæˆç›‘æ§æµç¨‹ | P0 |

### 2.2 å»¶è¿Ÿéœ€æ±‚ï¼ˆP1ï¼‰

| ID | åŠŸèƒ½ | æè¿° |
|----|------|------|
| REQ-P1-001 | è®¢å•æŒä¹…åŒ– | å°†è™šæ‹Ÿè®¢å•å­˜å‚¨åˆ°æ•°æ®åº“ |
| REQ-P1-002 | å†å²æ¨é€è®°å½• | ä¿å­˜æ¨é€å†å²ä¾›æŸ¥è¯¢ |
| REQ-P1-003 | æ¨é€å¤±è´¥é‡è¯• | è‡ªåŠ¨é‡è¯•å¤±è´¥çš„æ¨é€ |

## 3. åŠŸèƒ½è¯¦æƒ…

### 3.1 æ•°æ®æ›´æ–°æœåŠ¡ï¼ˆREQ-001ï¼‰

**æè¿°**ï¼šç‹¬ç«‹çš„Kçº¿æ•°æ®æ›´æ–°å‘½ä»¤ï¼Œå¯è¢«cronè°ƒåº¦æˆ–å…¶ä»–æœåŠ¡å¤ç”¨ã€‚

**å‘½ä»¤è®¾è®¡**ï¼š
```bash
# æ›´æ–°æŒ‡å®šäº¤æ˜“å¯¹åˆ—è¡¨
python manage.py update_ddps_klines --symbols ETH,BTC,HYPE,BNB,SOL,SUI --interval 4h

# ä½¿ç”¨é»˜è®¤äº¤æ˜“å¯¹
python manage.py update_ddps_klines --interval 4h
```

**å…³é”®å†³ç­–**ï¼š
- å¤ç”¨ç°æœ‰ `update_klines` å‘½ä»¤é€»è¾‘
- æ”¯æŒé…ç½®æ–‡ä»¶æŒ‡å®šé»˜è®¤äº¤æ˜“å¯¹åˆ—è¡¨
- è¿”å›æ›´æ–°ç»Ÿè®¡ï¼ˆæˆåŠŸ/å¤±è´¥æ•°é‡ï¼‰

### 3.2 DDPSç›‘æ§æœåŠ¡ï¼ˆREQ-002ï¼‰

**æè¿°**ï¼šæ ¸å¿ƒæœåŠ¡å±‚ï¼Œæä¾›DDPSæŒ‡æ ‡è®¡ç®—å’Œä¿¡å·æ£€æµ‹èƒ½åŠ›ï¼Œå¯è¢«å¤šä¸ªå‘½ä»¤å¤ç”¨ã€‚

**æœåŠ¡æ¥å£è®¾è®¡**ï¼š
```python
class DDPSMonitorService:
    def __init__(self, symbols: List[str], strategy_id: int = 7):
        """åˆå§‹åŒ–ç›‘æ§æœåŠ¡"""

    def calculate_all(self) -> DDPSMonitorResult:
        """è®¡ç®—æ‰€æœ‰äº¤æ˜“å¯¹çš„æŒ‡æ ‡å’Œä¿¡å·"""

    def get_buy_signals(self) -> List[BuySignal]:
        """è·å–æ»¡è¶³ä¹°å…¥æ¡ä»¶çš„ä¿¡å·"""

    def get_exit_signals(self, orders: List[Order]) -> List[ExitSignal]:
        """æ£€æŸ¥è®¢å•çš„å–å‡ºæ¡ä»¶"""

    def get_cycle_warnings(self) -> CycleWarningResult:
        """è·å–å‘¨æœŸé¢„è­¦ä¿¡æ¯"""

    def get_price_status(self) -> List[PriceStatus]:
        """è·å–æ‰€æœ‰äº¤æ˜“å¯¹çš„ä»·æ ¼çŠ¶æ€"""
```

**è¿”å›æ•°æ®ç»“æ„**ï¼š
```python
@dataclass
class PriceStatus:
    symbol: str           # äº¤æ˜“å¯¹
    current_price: Decimal  # ç°ä»·
    cycle_phase: str      # å‘¨æœŸé˜¶æ®µ
    p5: Decimal          # P5ä»·æ ¼
    p95: Decimal         # P95ä»·æ ¼
    ema25: Decimal       # EMA25
    inertia_mid: Decimal # æƒ¯æ€§ä¸­å€¼
    inertia_upper: Decimal # æƒ¯æ€§ä¸Šç•Œ
    inertia_lower: Decimal # æƒ¯æ€§ä¸‹ç•Œ
    probability: int     # å½“å‰ä»·æ ¼æ¦‚ç‡ä½ç½® (0-100)
    beta: float          # Î²æ–œç‡
```

### 3.3 ç­–ç•¥ä¿¡å·æ£€æµ‹ï¼ˆREQ-003ï¼‰

**åŠŸèƒ½**ï¼š
1. æ£€æµ‹ä¹°å…¥ä¿¡å·ï¼ˆé»˜è®¤ç­–ç•¥7ï¼‰
2. è®°å½•è™šæ‹Ÿè®¢å•ï¼ˆå†…å­˜ç®¡ç†ï¼‰
3. æ£€æŸ¥æœªå¹³ä»“è®¢å•çš„å–å‡ºæ¡ä»¶
4. è¾“å‡ºæ»¡è¶³å–å‡ºæ¡ä»¶çš„è®¢å•åˆ—è¡¨

**ä¹°å…¥ä¿¡å·è¾“å‡º**ï¼š
```
ğŸ“ˆ ä¹°å…¥ä¿¡å·:
- HYPE @ 25.34 (éœ‡è¡æœŸ, P5=24.85, è§¦å‘æ¡ä»¶: ä»·æ ¼<=P5)
```

**å–å‡ºä¿¡å·è¾“å‡º**ï¼š
```
ğŸ“‰ å–å‡ºä¿¡å·:
- è®¢å•#001 HYPE: æ­¢ç›ˆè§¦å‘ @ 26.50 (å¼€ä»“25.34, +4.58%, éœ‡è¡æœŸ(P95+EMA25)/2æ­¢ç›ˆ)
```

### 3.4 å‘¨æœŸé¢„è­¦ï¼ˆREQ-004ï¼‰

**åŠŸèƒ½**ï¼šåˆ—å‡ºå¤„äºä¸Šæ¶¨é¢„è­¦ã€ä¸‹è·Œé¢„è­¦å‘¨æœŸçš„äº¤æ˜“å¯¹ã€‚

**è¾“å‡ºæ ¼å¼**ï¼š
```
ğŸ”´ ä¸Šæ¶¨å‘¨æœŸé¢„è­¦: BTC, ETH
ğŸ”µ ä¸‹è·Œå‘¨æœŸé¢„è­¦: SOL, SUI
```

### 3.5 ä»·æ ¼çŠ¶æ€ï¼ˆREQ-005ï¼‰

**åŠŸèƒ½**ï¼šåˆ—å‡ºæ¯ä¸ªäº¤æ˜“å¯¹çš„å®Œæ•´ä»·æ ¼çŠ¶æ€ã€‚

**è¾“å‡ºæ ¼å¼**ï¼š
```
ğŸ“Š ä»·æ ¼çŠ¶æ€:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Symbol  â”‚ ç°ä»·     â”‚ å‘¨æœŸ       â”‚ P5         â”‚ P95        â”‚ æ¦‚ç‡ä½ç½® â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ BTC     â”‚ 97,500   â”‚ éœ‡è¡æœŸ     â”‚ 95,000     â”‚ 102,000    â”‚ P45      â”‚
â”‚ ETH     â”‚ 3,450    â”‚ ä¸Šæ¶¨å¼ºåŠ¿   â”‚ 3,200      â”‚ 3,800      â”‚ P60      â”‚
â”‚ HYPE    â”‚ 25.34    â”‚ éœ‡è¡æœŸ     â”‚ 24.85      â”‚ 26.50      â”‚ P32      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.6 æ¨é€æ•´åˆï¼ˆREQ-006ï¼‰

**åŠŸèƒ½**ï¼šå°†æ‰€æœ‰è®¡ç®—ç»“æœæ•´åˆä¸ºæ¨é€æ¶ˆæ¯ã€‚

**æ¨é€é…ç½®**ï¼š
- ä½¿ç”¨ç°æœ‰ `AlertPushService`
- Channel: `price_ddps`
- Token: ä½¿ç”¨é¡¹ç›®é…ç½®

**æ¨é€æ¨¡æ¿**ï¼š
```
ğŸ”” DDPSä»·æ ¼ç›‘æ§æŠ¥å‘Š
æ—¶é—´: 2026-01-08 12:00

ğŸ“ˆ ä¹°å…¥ä¿¡å· (1ä¸ª):
- HYPE @ 25.34 (éœ‡è¡æœŸ)

ğŸ“‰ å–å‡ºä¿¡å· (0ä¸ª):
æ— 

ğŸ”´ ä¸Šæ¶¨å‘¨æœŸ: BTC, ETH
ğŸ”µ ä¸‹è·Œå‘¨æœŸ: SOL, SUI

ğŸ“Š ä»·æ ¼çŠ¶æ€:
BTC: 97,500 (P45, éœ‡è¡æœŸ)
ETH: 3,450 (P60, ä¸Šæ¶¨å¼ºåŠ¿)
HYPE: 25.34 (P32, éœ‡è¡æœŸ)
...
```

### 3.7 ä¸»è°ƒåº¦è„šæœ¬ï¼ˆREQ-007ï¼‰

**å‘½ä»¤è®¾è®¡**ï¼š
```bash
# å®Œæ•´ç›‘æ§æµç¨‹ï¼ˆæ›´æ–°æ•°æ® + è®¡ç®— + æ¨é€ï¼‰
python manage.py ddps_monitor --full

# ä»…è®¡ç®—å’Œæ¨é€ï¼ˆä¸æ›´æ–°æ•°æ®ï¼‰
python manage.py ddps_monitor --skip-update

# ä»…è®¡ç®—ï¼ˆä¸æ¨é€ï¼‰
python manage.py ddps_monitor --no-push

# è‡ªå®šä¹‰äº¤æ˜“å¯¹
python manage.py ddps_monitor --symbols ETH,BTC,HYPE

# è‡ªå®šä¹‰ç­–ç•¥
python manage.py ddps_monitor --strategy 7
```

## 4. é…ç½®é¡¹

### 4.1 é»˜è®¤äº¤æ˜“å¯¹é…ç½®

åœ¨ `settings.py` ä¸­æ·»åŠ ï¼š
```python
DDPS_MONITOR_CONFIG = {
    'default_symbols': ['ETHUSDT', 'BTCUSDT', 'HYPEUSDT', 'BNBUSDT', 'SOLUSDT', 'SUIUSDT'],
    'default_strategy': 7,
    'push_channel': 'price_ddps',
    'push_token': '6020867bc6334c609d4f348c22f90f14',
    'interval': '4h',
    'market_type': 'futures',
}
```

### 4.2 Cronè°ƒåº¦é…ç½®

```crontab
# æ¯4å°æ—¶æ‰§è¡Œä¸€æ¬¡å®Œæ•´ç›‘æ§
0 */4 * * * cd /path/to/project && python manage.py ddps_monitor --full
```

## 5. æŠ€æœ¯çº¦æŸ

### 5.1 å¤ç”¨ç°æœ‰ç»„ä»¶

| ç»„ä»¶ | æ¥æº | ç”¨é€” |
|------|------|------|
| `update_klines` | backtest | æ•°æ®æ›´æ–° |
| `SignalCalculator` | ddps_z | ä¿¡å·è®¡ç®— |
| `DynamicExitSelector` | strategy_adapter | å–å‡ºæ¡ä»¶ |
| `BetaCycleCalculator` | ddps_z | å‘¨æœŸè®¡ç®— |
| `AlertPushService` | monitor | æ¨é€æœåŠ¡ |

### 5.2 æ€§èƒ½è¦æ±‚

| æŒ‡æ ‡ | ç›®æ ‡ |
|------|------|
| 6äº¤æ˜“å¯¹å®Œæ•´è®¡ç®— | < 10ç§’ |
| æ¨é€å»¶è¿Ÿ | < 5ç§’ |
| å†…å­˜å ç”¨ | < 100MB |

## 6. éªŒæ”¶æ ‡å‡†

### 6.1 åŠŸèƒ½éªŒæ”¶

- [ ] æ•°æ®æ›´æ–°å‘½ä»¤å¯ç‹¬ç«‹è¿è¡Œ
- [ ] DDPSç›‘æ§æœåŠ¡å¯è¢«å¤šå‘½ä»¤å¤ç”¨
- [ ] ç­–ç•¥ä¿¡å·æ£€æµ‹æ­£ç¡®ï¼ˆå¯¹æ¯”å›æµ‹ç»“æœï¼‰
- [ ] å‘¨æœŸé¢„è­¦è¾“å‡ºæ­£ç¡®
- [ ] ä»·æ ¼çŠ¶æ€è®¡ç®—æ­£ç¡®
- [ ] æ¨é€æ¶ˆæ¯æ ¼å¼æ­£ç¡®
- [ ] ä¸»è°ƒåº¦è„šæœ¬å¯é…ç½®

### 6.2 é›†æˆéªŒæ”¶

- [ ] å¯é…ç½®åˆ°cronå®šæ—¶æ‰§è¡Œ
- [ ] æ¨é€åˆ°price_ddps channelæˆåŠŸ
- [ ] æ—¥å¿—è®°å½•å®Œæ•´

## 7. é£é™©è¯„ä¼°

| é£é™© | å½±å“ | ç¼“è§£æªæ–½ |
|------|------|----------|
| APIé™æµ | æ•°æ®æ›´æ–°å¤±è´¥ | å»¶è¿Ÿæ§åˆ¶ï¼Œé‡è¯•æœºåˆ¶ |
| æ¨é€å¤±è´¥ | ä¿¡æ¯ä¸¢å¤± | æ—¥å¿—è®°å½•ï¼Œåç»­å¯åŠ é‡è¯• |
| è®¡ç®—è€—æ—¶ | è¶…æ—¶ | å¼‚æ­¥å¤„ç†ï¼ˆP1ä¼˜åŒ–ï¼‰ |

## é™„å½•

### A. æ¶æ„å›¾

```mermaid
graph TB
    subgraph "Cronè°ƒåº¦å±‚"
        CRON[Crontab<br/>æ¯4å°æ—¶è§¦å‘]
    end

    subgraph "Django Commandå±‚"
        CMD_MAIN[ddps_monitor<br/>ä¸»è°ƒåº¦å‘½ä»¤]
        CMD_UPDATE[update_ddps_klines<br/>æ•°æ®æ›´æ–°å‘½ä»¤]
    end

    subgraph "æœåŠ¡å±‚ (å¯å¤ç”¨)"
        SVC_MONITOR[DDPSMonitorService<br/>æ ¸å¿ƒç›‘æ§æœåŠ¡]
        SVC_PUSH[AlertPushService<br/>æ¨é€æœåŠ¡]
    end

    subgraph "è®¡ç®—å±‚ (å·²æœ‰)"
        CALC_SIGNAL[SignalCalculator<br/>ä¿¡å·è®¡ç®—]
        CALC_EXIT[DynamicExitSelector<br/>é€€å‡ºæ¡ä»¶]
        CALC_CYCLE[BetaCycleCalculator<br/>å‘¨æœŸè®¡ç®—]
        CALC_EMA[EMACalculator<br/>EMAè®¡ç®—]
        CALC_EWMA[EWMACalculator<br/>EWMAè®¡ç®—]
    end

    subgraph "æ•°æ®å±‚"
        DB_KLINE[(KLine<br/>Kçº¿æ•°æ®)]
        DB_ORDER[(Order<br/>è™šæ‹Ÿè®¢å•)]
        API_BINANCE[Binance API]
    end

    subgraph "æ¨é€ç›®æ ‡"
        HUICHENG[æ…§è¯šæ¨é€å¹³å°<br/>channel: price_ddps]
    end

    %% è°ƒåº¦æµç¨‹
    CRON --> CMD_MAIN
    CMD_MAIN --> |1. æ›´æ–°æ•°æ®| CMD_UPDATE
    CMD_MAIN --> |2. è®¡ç®—æŒ‡æ ‡| SVC_MONITOR
    CMD_MAIN --> |3. æ•´åˆæ¨é€| SVC_PUSH

    %% æ•°æ®æ›´æ–°æµç¨‹
    CMD_UPDATE --> API_BINANCE
    API_BINANCE --> DB_KLINE

    %% ç›‘æ§æœåŠ¡è°ƒç”¨
    SVC_MONITOR --> CALC_SIGNAL
    SVC_MONITOR --> CALC_EXIT
    SVC_MONITOR --> CALC_CYCLE
    SVC_MONITOR --> CALC_EMA
    SVC_MONITOR --> CALC_EWMA
    SVC_MONITOR --> DB_KLINE
    SVC_MONITOR --> DB_ORDER

    %% æ¨é€
    SVC_PUSH --> HUICHENG

    %% æ ·å¼
    classDef command fill:#e1f5fe,stroke:#01579b
    classDef service fill:#fff3e0,stroke:#e65100
    classDef calc fill:#f3e5f5,stroke:#7b1fa2
    classDef data fill:#e8f5e9,stroke:#2e7d32

    class CMD_MAIN,CMD_UPDATE command
    class SVC_MONITOR,SVC_PUSH service
    class CALC_SIGNAL,CALC_EXIT,CALC_CYCLE,CALC_EMA,CALC_EWMA calc
    class DB_KLINE,DB_ORDER,API_BINANCE data
```

### B. æ•°æ®æµå›¾

```mermaid
sequenceDiagram
    participant CRON as Crontab
    participant MAIN as ddps_monitor
    participant UPDATE as update_ddps_klines
    participant MONITOR as DDPSMonitorService
    participant PUSH as AlertPushService
    participant DB as Database
    participant API as Binance API
    participant HC as æ…§è¯šå¹³å°

    CRON->>MAIN: è§¦å‘ (æ¯4å°æ—¶)

    rect rgb(240, 248, 255)
        Note over MAIN,API: 1. æ•°æ®æ›´æ–°é˜¶æ®µ
        MAIN->>UPDATE: è°ƒç”¨æ•°æ®æ›´æ–°
        UPDATE->>API: è·å–Kçº¿æ•°æ®
        API-->>UPDATE: è¿”å›Kçº¿
        UPDATE->>DB: ä¿å­˜/æ›´æ–°Kçº¿
        UPDATE-->>MAIN: æ›´æ–°å®Œæˆ
    end

    rect rgb(255, 248, 240)
        Note over MAIN,DB: 2. è®¡ç®—é˜¶æ®µ
        MAIN->>MONITOR: åˆå§‹åŒ–(symbols, strategy)
        MONITOR->>DB: è¯»å–Kçº¿æ•°æ®
        MONITOR->>MONITOR: è®¡ç®—EMA/EWMA/P5/P95
        MONITOR->>MONITOR: è®¡ç®—Î²å‘¨æœŸ
        MONITOR->>MONITOR: æ£€æµ‹ä¹°å…¥ä¿¡å·
        MONITOR->>MONITOR: æ£€æµ‹å–å‡ºä¿¡å·
        MONITOR-->>MAIN: è¿”å›DDPSMonitorResult
    end

    rect rgb(248, 255, 240)
        Note over MAIN,HC: 3. æ¨é€é˜¶æ®µ
        MAIN->>MAIN: ç»„è£…æ¨é€æ¨¡æ¿
        MAIN->>PUSH: å‘é€æ¨é€
        PUSH->>HC: POST /api/simple/alert/
        HC-->>PUSH: æ¨é€æˆåŠŸ
        PUSH-->>MAIN: å®Œæˆ
    end
```
