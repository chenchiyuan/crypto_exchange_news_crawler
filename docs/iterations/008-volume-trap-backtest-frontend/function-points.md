# 功能点清单

**项目**: Volume Trap 回测结果前端展示
**生成日期**: 2025-12-26
**PRD文档**: docs/iterations/008-volume-trap-backtest-frontend/prd.md

---

## 📊 概览统计

- **功能点总数**: 20个
- **P0功能**: 16个 (80%)
- **P1功能**: 4个 (20%)
- **P2功能**: 0个 (0%)
- **功能模块**: 4个
- **总预估工时**: 5-7人天

---

## 📋 功能点详细清单

### 模块一：回测结果列表页

#### [P0] F1.1 列表页面展示
- **需求来源**: 用户痛点1 - 无法直观查看回测结果列表
- **功能描述**: 展示所有回测结果的表格，包含symbol、interval、entry_time、final_profit_percent等核心字段
- **用户输入**: 访问 `/backtest/` 页面
- **系统输出**: 渲染回测结果表格，显示核心字段
- **关键约束**: 复用现有Dashboard表格组件样式
- **验收标准**:
  - [ ] 表格正确显示所有BacktestResult记录
  - [ ] 字段包含：交易对、周期、入场时间、最终收益率、是否盈利
  - [ ] 收益率使用颜色区分正负（绿色/红色）
- **依赖关系**: 无
- **预估工时**: 0.5人天

#### [P0] F1.2 筛选功能
- **需求来源**: 用户痛点1 - 无法快速筛选数据
- **功能描述**: 提供状态、周期、时间范围、是否盈利的筛选器，支持多条件组合筛选
- **用户输入**: 选择筛选条件（状态下拉、周期下拉、日期范围、盈利/亏损单选）
- **系统输出**: 实时过滤表格数据，更新URL参数
- **关键约束**: 筛选条件保持在URL中，支持书签和分享
- **验收标准**:
  - [ ] 支持按状态筛选（pending/confirmed/validated/invalidated）
  - [ ] 支持按周期筛选（1h/4h/1d）
  - [ ] 支持按时间范围筛选
  - [ ] 支持按是否盈利筛选
  - [ ] 筛选条件可在URL中保持
- **依赖关系**: F1.1
- **预估工时**: 0.5人天

#### [P0] F1.3 排序功能
- **需求来源**: 用户故事 - 快速找到最佳/最差表现
- **功能描述**: 支持按final_profit_percent、entry_time、entry_price等字段排序，默认按收益倒序
- **用户输入**: 点击表头进行排序
- **系统输出**: 表格数据按指定字段和方向排序，显示排序指示器
- **关键约束**: 默认按final_profit_percent倒序（最佳在前）
- **验收标准**:
  - [ ] 点击列标题可切换升序/降序
  - [ ] 显示当前排序指示器（箭头图标）
  - [ ] 默认按收益率倒序排列
- **依赖关系**: F1.1
- **预估工时**: 0.3人天

#### [P0] F1.4 分页功能
- **需求来源**: 性能优化 - 大量数据场景
- **功能描述**: 每页显示20条记录，提供翻页导航和页码跳转
- **用户输入**: 点击翻页按钮或输入页码
- **系统输出**: 加载对应页的数据，更新分页控件状态
- **关键约束**: 每页固定20条记录
- **验收标准**:
  - [ ] 每页显示20条记录
  - [ ] 显示总记录数和总页数
  - [ ] 支持上一页/下一页导航
  - [ ] 支持跳转到指定页码
- **依赖关系**: F1.1
- **预估工时**: 0.3人天

#### [P0] F1.5 响应式表格
- **需求来源**: 技术约束 - 响应式设计
- **功能描述**: 桌面端显示表格，移动端自动转换为卡片布局
- **用户输入**: 在不同设备访问页面
- **系统输出**: 根据屏幕宽度自动适配布局
- **关键约束**: 断点：桌面端（>992px）、平板端（768-992px）、移动端（<768px）
- **验收标准**:
  - [ ] 桌面端正常显示表格
  - [ ] 移动端显示卡片式布局
  - [ ] 平板端合理适配
- **依赖关系**: F1.1
- **预估工时**: 0.3人天

---

### 模块二：回测统计面板

#### [P0] F2.1 关键指标卡片
- **需求来源**: 用户痛点2 - 无法快速了解整体策略表现
- **功能描述**: 显示胜率、盈亏比、平均收益、最大回撤、交易总数等核心指标
- **用户输入**: 访问 `/backtest/statistics/` 页面
- **系统输出**: 渲染指标卡片组件，显示计算后的统计数据
- **关键约束**: 前端计算聚合数据，复用现有API
- **验收标准**:
  - [ ] 显示胜率（盈利交易数/总交易数）
  - [ ] 显示盈亏比（平均盈利/平均亏损）
  - [ ] 显示平均收益率
  - [ ] 显示最大回撤
  - [ ] 显示交易总数
- **依赖关系**: 无
- **预估工时**: 0.5人天

#### [P0] F2.2 收益分布图表
- **需求来源**: 用户故事 - 了解收益分布情况
- **功能描述**: 使用柱状图展示不同收益区间的交易数量分布
- **用户输入**: 查看统计面板
- **系统输出**: 渲染柱状图，X轴为收益区间，Y轴为交易数量
- **关键约束**: 使用Chart.js实现
- **验收标准**:
  - [ ] 正确显示收益分布柱状图
  - [ ] 收益区间划分合理（如：<-10%, -10%~0%, 0%~10%, >10%）
  - [ ] 支持鼠标悬停显示具体数值
- **依赖关系**: F2.1
- **预估工时**: 0.5人天

#### [P0] F2.3 回撤分析图表
- **需求来源**: 风险分析需求
- **功能描述**: 使用折线图展示回撤分布情况
- **用户输入**: 查看统计面板
- **系统输出**: 渲染折线图，展示最大回撤分布
- **关键约束**: 使用Chart.js实现
- **验收标准**:
  - [ ] 正确显示回撤分布折线图
  - [ ] 支持鼠标悬停显示具体数值
- **依赖关系**: F2.1
- **预估工时**: 0.5人天

#### [P0] F2.4 分组统计表
- **需求来源**: 多维度分析需求
- **功能描述**: 按周期、状态、时间等维度统计交易数量和平均收益
- **用户输入**: 查看统计面板
- **系统输出**: 渲染分组统计表格
- **关键约束**: 复用现有表格组件
- **验收标准**:
  - [ ] 按周期分组统计（1h/4h/1d）
  - [ ] 按状态分组统计
  - [ ] 显示各组的交易数量和平均收益
- **依赖关系**: F2.1
- **预估工时**: 0.3人天

#### [P1] F2.5 导出功能
- **需求来源**: 数据分析需求
- **功能描述**: 支持将统计数据导出为CSV文件
- **用户输入**: 点击导出按钮
- **系统输出**: 下载CSV文件
- **关键约束**: 建议推迟到P1阶段
- **验收标准**:
  - [ ] 点击导出按钮可下载CSV
  - [ ] CSV包含完整统计数据
- **依赖关系**: F2.1, F2.4
- **预估工时**: 0.3人天
- **⚠️ 推迟理由**: 非MVP核心功能，可在后续迭代添加

---

### 模块三：回测详情页

#### [P0] F3.1 基本信息面板
- **需求来源**: 用户痛点3 - 无法详细分析单个回测事件
- **功能描述**: 显示交易对、周期、入场/出场信息、关键指标等
- **用户输入**: 访问 `/backtest/{id}/` 页面
- **系统输出**: 渲染基本信息面板
- **关键约束**: 复用现有卡片组件样式
- **验收标准**:
  - [ ] 显示交易对和周期
  - [ ] 显示入场时间和价格
  - [ ] 显示最低点时间和价格
  - [ ] 显示反弹点时间和价格
  - [ ] 显示最终收益率
- **依赖关系**: 无
- **预估工时**: 0.3人天

#### [P0] F3.2 K线图表展示
- **需求来源**: 用户痛点4 - 无法通过K线图直观分析价格走势
- **功能描述**: 使用Chart.js展示完整K线数据
- **用户输入**: 查看详情页
- **系统输出**: 渲染K线图表
- **关键约束**: 使用Chart.js实现，MVP阶段只显示OHLC价格数据
- **验收标准**:
  - [ ] 正确显示K线图（OHLC）
  - [ ] K线颜色区分涨跌（绿色/红色）
  - [ ] 支持鼠标悬停显示价格信息
- **依赖关系**: F3.1
- **预估工时**: 1人天

#### [P0] F3.3 关键点位标注
- **需求来源**: 用户故事 - 直观看到入场点、最低点、反弹点
- **功能描述**: 在K线图上标注入场点、最低点、反弹点，添加说明文字
- **用户输入**: 查看K线图
- **系统输出**: K线图上显示标注点和说明
- **关键约束**: 标注点使用不同颜色区分
- **验收标准**:
  - [ ] 入场点使用蓝色标注
  - [ ] 最低点使用红色标注
  - [ ] 反弹点使用绿色标注
  - [ ] 标注点有说明文字
- **依赖关系**: F3.2
- **预估工时**: 0.5人天

#### [P0] F3.4 持仓期间价格数据表
- **需求来源**: 详细分析需求
- **功能描述**: 以表格形式展示每根K线的OHLCV数据
- **用户输入**: 查看详情页
- **系统输出**: 渲染OHLCV数据表格
- **关键约束**: 复用现有表格组件
- **验收标准**:
  - [ ] 显示持仓期间每根K线的OHLCV数据
  - [ ] 时间格式统一
  - [ ] 价格保留适当小数位
- **依赖关系**: F3.1
- **预估工时**: 0.3人天

#### [P1] F3.5 收益率曲线图
- **需求来源**: 高级分析需求
- **功能描述**: 展示持仓期间的收益率变化曲线
- **用户输入**: 查看详情页
- **系统输出**: 渲染收益率曲线图
- **关键约束**: 建议推迟到P1阶段
- **验收标准**:
  - [ ] 显示收益率变化曲线
  - [ ] X轴为时间，Y轴为收益率
- **依赖关系**: F3.1, F3.2
- **预估工时**: 0.5人天
- **⚠️ 推迟理由**: 非MVP核心功能，K线图已能满足基本分析需求

---

### 模块四：导航和布局

#### [P0] F4.1 主导航菜单
- **需求来源**: 用户体验需求
- **功能描述**: 在现有Dashboard基础上添加"回测结果"菜单项
- **用户输入**: 点击导航菜单
- **系统输出**: 跳转到对应页面
- **关键约束**: 复用现有导航组件
- **验收标准**:
  - [ ] 导航菜单包含"回测结果"入口
  - [ ] 当前页面高亮显示
- **依赖关系**: 无
- **预估工时**: 0.2人天

#### [P0] F4.2 面包屑导航
- **需求来源**: 用户体验需求
- **功能描述**: 显示当前位置（首页 > 回测结果 > 列表/统计/详情）
- **用户输入**: 查看页面
- **系统输出**: 显示面包屑导航
- **关键约束**: 复用现有面包屑组件
- **验收标准**:
  - [ ] 正确显示当前页面路径
  - [ ] 支持点击返回上级页面
- **依赖关系**: F4.1
- **预估工时**: 0.2人天

#### [P0] F4.3 页面布局模板
- **需求来源**: 技术约束 - 保持风格一致性
- **功能描述**: 复用现有Dashboard的布局模板，保持风格一致
- **用户输入**: 访问任意页面
- **系统输出**: 统一的页面布局
- **关键约束**: 复用现有base模板
- **验收标准**:
  - [ ] 页面布局与现有Dashboard一致
  - [ ] 头部、侧边栏、内容区结构统一
- **依赖关系**: 无
- **预估工时**: 0.2人天

#### [P0] F4.4 404错误页面
- **需求来源**: 用户体验需求
- **功能描述**: 处理无效URL，显示友好的错误信息
- **用户输入**: 访问无效URL
- **系统输出**: 显示404错误页面
- **关键约束**: 复用现有错误页面模板
- **验收标准**:
  - [ ] 无效URL显示404页面
  - [ ] 提供返回首页链接
- **依赖关系**: 无
- **预估工时**: 0.1人天

#### [P0] F4.5 加载状态和空状态
- **需求来源**: 用户体验需求
- **功能描述**: 提供加载动画和空数据提示，提升用户体验
- **用户输入**: 页面加载中或无数据时
- **系统输出**: 显示加载动画或空状态提示
- **关键约束**: 复用现有加载组件
- **验收标准**:
  - [ ] 数据加载时显示加载动画
  - [ ] 无数据时显示友好提示
- **依赖关系**: 无
- **预估工时**: 0.2人天

---

## 🔗 依赖关系图

```
┌─────────────────────────────────────────────────────────────┐
│                      模块四：导航和布局                        │
│  F4.1 主导航 ──→ F4.2 面包屑                                  │
│  F4.3 布局模板    F4.4 404页面    F4.5 加载状态                 │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                    模块一：回测结果列表页                       │
│  F1.1 列表展示 ──→ F1.2 筛选功能                               │
│        │                                                     │
│        ├──→ F1.3 排序功能                                     │
│        │                                                     │
│        ├──→ F1.4 分页功能                                     │
│        │                                                     │
│        └──→ F1.5 响应式表格                                    │
└─────────────────────────────────────────────────────────────┘
                              │
          ┌───────────────────┴───────────────────┐
          ▼                                       ▼
┌─────────────────────────┐         ┌─────────────────────────┐
│   模块二：回测统计面板    │         │   模块三：回测详情页      │
│                         │         │                         │
│  F2.1 关键指标卡片       │         │  F3.1 基本信息面板       │
│        │                │         │        │                │
│        ├──→ F2.2 收益图  │         │        ├──→ F3.2 K线图   │
│        │                │         │        │       │        │
│        ├──→ F2.3 回撤图  │         │        │       └──→ F3.3 │
│        │                │         │        │          标注   │
│        ├──→ F2.4 统计表  │         │        │                │
│        │                │         │        └──→ F3.4 数据表  │
│        └──→ F2.5 导出[P1]│         │                         │
│                         │         │        └──→ F3.5 曲线[P1]│
└─────────────────────────┘         └─────────────────────────┘
```

---

## 📈 质量检查

### 格式完整性
- ✅ 所有功能点包含完整8要素
- ✅ 编号规则一致（F{模块}.{序号}）
- ✅ 优先级标记清晰（P0/P1）

### 优先级分布
- P0功能占比：80% ✅ (建议：60-80%)
- P1功能占比：20% ✅ (建议：15-30%)
- P2功能占比：0%

### 工时估算
- 总预估工时：5-7人天
- 平均工时：0.35人天/功能点
- 最大单功能工时：F3.2 K线图表展示（1人天）

### 依赖关系
- 无循环依赖 ✅
- 关键路径：F4.3 → F1.1 → F3.1 → F3.2 → F3.3

---

## ⚠️ 问题清单

### 已识别问题
无严重问题

### 待确认事项
1. K线图技术选型已推荐Chart.js，待开发阶段确认
2. 收益区间划分标准需根据实际数据调整

---

## 📈 质量评分

### 整体评分：92/100
- 格式完整性：19/20
- 描述质量：18/20
- 优先级合理性：19/20
- 依赖关系：18/20
- 验收标准：18/20

### 评估说明
- 功能点定义清晰，覆盖用户核心痛点
- MVP优先级分配合理，P0功能聚焦核心价值
- 依赖关系明确，无循环依赖
- 验收标准具体可测量

---

**最后更新**: 2025-12-26
