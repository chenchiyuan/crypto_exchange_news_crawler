# P0: 快速初始化 - 策略17上涨预警入场

## 需求背景

用户需要实现策略17，核心逻辑是：
- **买入条件**：当DDPS-Z算法检测到第一根出现上涨预警(bull_warning)的K线时，在下一根K线的open价格买入
- **止盈止损**：复用策略16的EMA状态止盈 + 5%止损

## 约束条件

1. **时间约束**：预计工作量 ≤ 2天
2. **架构约束**：基于现有strategy_adapter架构，复用IStrategy接口
3. **依赖约束**：
   - 复用 `BetaCycleCalculator` 的周期状态计算
   - 复用 `EmaStateExit` 的止盈逻辑
   - 复用策略16的止损逻辑（5%）

## 可行性评估

### 技术可行性：✅ 高

1. **周期状态计算已存在**：`ddps_z/calculators/beta_cycle_calculator.py` 已实现完整的状态机逻辑
   - `bull_warning`状态：β > 600 且增加时触发
   - 状态转换逻辑清晰，可直接复用

2. **止盈止损可复用**：
   - `strategy_adapter/exits/ema_state_exit.py` 可直接使用
   - 5%止损逻辑与策略16完全一致

3. **策略架构成熟**：
   - 策略16 (`strategy16_limit_entry.py`) 提供了完整的参考模板
   - 指标计算、回测流程、结果生成均可复用

### 工作量评估：✅ 低（≤ 2天）

| 任务 | 预估 |
|------|------|
| 策略类实现 | 0.5天 |
| 回测验证 | 0.5天 |
| 集成测试 | 0.5天 |
| **合计** | **1.5天** |

## 架构兼容性

### 已有组件复用

```
现有组件              → 策略17复用方式
─────────────────────────────────────────────
BetaCycleCalculator   → 直接调用calculate()获取cycle_phases
EmaStateExit          → 作为止盈条件使用
Strategy16LimitEntry  → 参考其架构模式
IStrategy接口         → 实现标准接口
```

### 核心差异

| 对比项 | 策略16 | 策略17 |
|--------|--------|--------|
| 买入触发 | P5限价挂单 | 上涨预警(bull_warning)信号 |
| 买入价格 | 挂单价格成交 | 下一根K线open |
| 止盈止损 | EMA状态 + 5%止损 | 相同 |

## 结论

✅ **适合快速流程**：需求明确、架构兼容、工作量可控

---

**创建时间**: 2026-01-12
**迭代编号**: 038
