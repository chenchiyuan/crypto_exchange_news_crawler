# 需求澄清记录 - 迭代043：动态复利仓位管理

## 澄清会话

### 日期：2026-01-13

---

### Q1: 边界处理

**问题**：当可用现金为0或负数时，如何处理仓位计算？

**选项**：
1. 跳过挂单 - 可用现金不足时直接跳过本次挂单，等待资金回笼
2. 使用最小金额 - 设置最小仓位金额（如100 USDT），资金不足最小金额时跳过

**用户选择**：**跳过挂单**

**决策理由**：简单直接，避免复杂的最小金额检查逻辑

---

### Q2: 集成方式

**问题**：新仓位管理策略应该如何与策略19集成？

**选项**：
1. 独立模块注入 - 创建IPositionManager接口和实现类，策略通过依赖注入使用
2. 策略配置参数 - 在策略构造函数中增加position_mode参数切换固定/动态模式
3. 策略继承 - 创建Strategy19DynamicPosition子类继承Strategy19

**用户选择**：**独立模块注入**

**决策理由**：
- 可插拔性最好，支持多策略复用
- 符合依赖注入设计原则
- 便于单元测试

---

### Q3: 兼容性

**问题**：是否需要保留原有的固定仓位模式作为可选项？

**选项**：
1. 保留两种模式 - 支持fixed（固定金额）和dynamic（动态复利）两种模式切换
2. 仅动态模式 - 直接替换为动态复利模式，移除固定金额逻辑

**用户选择**：**仅动态模式**

**决策理由**：
- 简化代码结构
- 专注复利效应的实现
- 减少维护负担

---

## 关键决策汇总

| 决策项 | 选择 | 影响范围 |
|--------|------|----------|
| 边界处理 | 跳过挂单 | F03 边界条件处理 |
| 集成方式 | 独立模块注入 | F01, F04 接口与集成 |
| 兼容性 | 仅动态模式 | F05 移除固定仓位 |

---

## 未解决问题

无

---

## 文档信息

- **迭代编号**：043
- **澄清日期**：2026-01-13
- **参与者**：用户、AI
