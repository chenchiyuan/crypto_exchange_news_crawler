# 挂单位置优化算法演进历史

本目录保存了挂单位置优化算法的历史版本，用于追溯设计决策。

## 版本演进

### v1.0 - 初始提案 (2025-12-04)

**文档**: `entry_position_optimization_proposal.md`

**核心思路**:
- 基于布林带 + EMA斜率 + 触发概率建模
- 生成多个候选价格并评分
- 使用历史回测计算触发概率

**方法**:
- 方案A: 基于EMA斜率的档位选择
- 方案B: 基于15m RSI的精确择时
- 方案C: 基于布林带的入场位

**状态**: 待讨论（已被v2.0替代）

---

### v2.0 - 简化方案 (2025-12-04)

**文档**: `entry_position_optimization_v2.md`

**核心改进**:
- 简化指标体系，聚焦RSI + 历史统计
- 明确输出触发概率
- 多方案对比（立即入场/保守反弹/明显反弹）

**核心指标**:
- RSI(15m): 判断反弹空间
- ATR: 趋势和波动率修正
- 历史统计: 计算触发概率

**输出格式**:
- 推荐挂单价
- 24h/72h触发概率
- 期望收益（盈利空间 × 触发概率）

**状态**: 待讨论（已被v3.0最终版替代）

---

### v3.0 - 最终版 (2025-12-04) ✅

**文档**: `../../entry_algorithm_final.md`

**算法总览**:
```
Step 1: 用RSI计算理论反弹幅度（预测价格可能涨多少）
Step 2: 用历史统计计算触发概率（验证这个涨幅在过去7天出现的频率）
Step 3: 生成3个候选价格，计算期望收益，推荐最优方案
```

**核心函数**:
1. `calculate_rebound_potential()` - RSI + 趋势 + 波动率 → 反弹幅度
2. `calculate_trigger_probability_from_history()` - 滑动窗口统计 → 触发概率
3. `generate_entry_recommendations()` - 综合评估 → 推荐方案

**实现文件**: `grid_trading/services/entry_optimizer.py`

**状态**: ✅ **已实施**

---

## 版本对比

| 维度 | v1.0 | v2.0 | v3.0（最终版） |
|------|------|------|---------------|
| 核心方法 | 布林带+评分 | RSI+历史统计 | **RSI+历史统计** |
| 算法明确度 | 模糊 | 中等 | **完全明确** ✅ |
| 参数可调性 | 低 | 中 | **高（9个参数）** ✅ |
| 边界处理 | 不完整 | 基本 | **完善** ✅ |
| 输出格式 | 不清晰 | 清晰 | **标准化JSON** ✅ |
| 实现状态 | 未实施 | 未实施 | **已实施** ✅ |

---

## 查看当前实现

- 算法文档: `../../entry_algorithm_final.md`
- 代码实现: `../../../grid_trading/services/entry_optimizer.py`
- 使用指南: `../../SCREENING_QUICKSTART.md`

---

## 为什么归档

这些历史版本记录了算法设计的演进过程，包含了大量思考和讨论，对理解最终方案的设计决策有重要参考价值。归档而非删除，是为了:

1. **保留设计决策过程**: 未来修改算法时可以回顾为什么选择当前方案
2. **避免重复探索**: 已经讨论过的方案不需要再次从头开始
3. **知识传承**: 新成员可以通过历史文档快速了解算法演进
4. **审计追溯**: 技术决策的完整记录

---

**归档时间**: 2025-12-04
**归档原因**: v3.0最终版已实施，v1.0/v2.0已过时
**维护说明**: 本目录为只读归档，不应修改历史文档
